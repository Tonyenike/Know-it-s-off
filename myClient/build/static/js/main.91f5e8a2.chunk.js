(this["webpackJsonpmy-react-app"]=this["webpackJsonpmy-react-app"]||[]).push([[0],{62:function(e,t,a){e.exports=a(91)},67:function(e,t,a){},91:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),s=a(51),r=a.n(s),c=(a(67),a(3)),i=a(4),o=a(6),m=a(5),p=a(7),u=a(17),d=a(11),h=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).state={name:a.props.name,status:a.props.status,id:a.props.id},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"col mt-3"},l.a.createElement("div",{className:"card bg-light"},l.a.createElement("div",{className:"card-body"},l.a.createElement("h5",{className:"card-title text-wrap"},this.state.name),l.a.createElement("p",{className:"card-text"},"Status:",this.state.status?" On":" Off"),l.a.createElement(d.b,{to:"/appliances/"+this.state.id,className:"btn btn-primary text-wrap"},"Modify appliance details"))))}}]),t}(n.Component),g=a(8),f=a(2),b=a.n(f),E=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).countAppliancesOn=function(e){for(var t=0,a=0;e.length>a;a++)!0===e[a].status&&t++;return t},a.state={loading:!0,myAppliances:[],error:!1,redirect:null,appliancesOn:0,error_response:null},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.a.get("/appliances").then((function(t){e.setState({loading:!1,myAppliances:t.data,appliancesOn:e.countAppliancesOn(t.data)})})).catch((function(t){e.setState({loading:!1,error:!0}),t.response&&(e.setState({error_response:t.response.statusText}),"not authorized"===t.response.data?e.setState({redirect:"/"}):t.response.data&&console.log(t.response))}))}},{key:"render",value:function(){return this.state.loading?l.a.createElement("div",{className:"d-flex justify-content-center m-5"},l.a.createElement(g.CircleSpinner,{size:60,color:"#686769",loading:this.state.loading})):this.state.error?this.state.redirect?l.a.createElement(u.a,{to:this.state.redirect}):l.a.createElement("div",null,l.a.createElement("h3",null,"There was an error"),l.a.createElement("h3",null,this.state.error_response)):l.a.createElement("div",null,l.a.createElement("div",{className:"row m-3"},l.a.createElement("div",{className:"col"},l.a.createElement("h1",{className:"text-center"},"My appliances"))),l.a.createElement("div",{className:"row m-3"},l.a.createElement("div",{className:"col"},l.a.createElement("h6",{className:"text-muted text-center"},this.state.appliancesOn," of your appliances are on."))),l.a.createElement("div",{className:"row row-cols-lg-4 row-cols-md-3 row-cols-sm-2 row-cols-1 m-3"},this.state.myAppliances.map((function(e){return l.a.createElement(h,{key:e.id,name:e.name,status:e.status,id:e.id})}))),l.a.createElement(d.b,{to:"/appliances/new",className:"btn btn-success m-3"},"Register a new appliance"))}}]),t}(n.Component),v=a(27),y=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).toggleNavbar=a.toggleNavbar.bind(Object(v.a)(a)),a.state={collapsed:!0},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"toggleNavbar",value:function(){this.setState({collapsed:!this.state.collapsed})}},{key:"render",value:function(){var e=this.state.collapsed,t=e?"collapse navbar-collapse":"collapse nav-bar collapse show",a=e?"navbar-toggler navbar-toggler-right collapsed":"navbar-toggler navbar-toggler-right";return l.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-info"},l.a.createElement(d.b,{to:"/home",className:"navbar-brand"},"Know It's Off"),l.a.createElement("button",{onClick:this.toggleNavbar,className:"".concat(a),type:"button","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{className:"navbar-toggler-icon"})),l.a.createElement("div",{className:"".concat(t),id:"navbarNavAltMarkup"},l.a.createElement("div",{className:"navbar-nav"},l.a.createElement(d.b,{to:"/home",className:"nav-item nav-link active"},"Home "),l.a.createElement(d.b,{to:"/appliances",className:"nav-item nav-link"},"My Appliances"),l.a.createElement(d.b,{to:"/scout/new",className:"nav-item nav-link"},"New Scout"),l.a.createElement(d.b,{to:"/user/edit",className:"nav-item nav-link"},"Edit User"),l.a.createElement(d.b,{to:"/logout",className:"nav-item nav-link"},"Logout"))))}}]),t}(n.Component),N=a(10),S=a(9),C=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).postData=function(e){a.setState({postLoading:!0}),b.a.post("/appliances",{name:a.state.myAppliance.name,type:a.state.myAppliance.type}).then((function(e){a.setState({postLoading:!1}),alert("Appliance added."),console.log(e)})),e.preventDefault()},a.handleChange=function(e){a.setState({myAppliance:Object(S.a)({},a.state.myAppliance,Object(N.a)({},e.target.name,e.target.value))})},a.state={loading:!1,myAppliance:{name:"My Appliance",type:"Oven",alert_email:!1,alert_text:!1},error:!1,postLoading:!1},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.state.error?l.a.createElement("div",{className:"m-5"},l.a.createElement("h3",null,"There was an error")):this.state.loading?l.a.createElement("div",{className:"d-flex justify-content-center m-5"},l.a.createElement(g.CircleSpinner,{size:60,color:"#686769",loading:this.state.loading})):l.a.createElement("div",{className:"m-5"},l.a.createElement("form",null,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{for:"inputName"},"Appliance name"),l.a.createElement("input",{className:"form-control",name:"name",id:"inputName","aria-describedby":"nameHelp",onChange:this.handleChange,value:this.state.myAppliance.name})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{for:"inputType"},"Appliance type"),l.a.createElement("input",{className:"form-control",name:"type",id:"inputType",onChange:this.handleChange,value:this.state.myAppliance.type})),l.a.createElement("div",{className:"form-check"},l.a.createElement("input",{type:"checkbox",className:"form-check-input",name:"alert_email",onChange:this.handleChange,value:this.state.myAppliance.alert_email,id:"exampleCheck1"}),l.a.createElement("label",{className:"form-check-label",for:"exampleCheck1"},"Send email alerts")),l.a.createElement("div",{className:"form-check"},l.a.createElement("input",{type:"checkbox",className:"form-check-input",id:"exampleCheck2",name:"alert_text",onChange:this.handleChange,value:this.state.myAppliance.alert_text}),l.a.createElement("label",{className:"form-check-label",for:"exampleCheck2"},"Send text alerts")),l.a.createElement("button",{onClick:this.postData,className:"btn btn-success"},"Add this appliance",l.a.createElement(g.CircleSpinner,{size:20,color:"#3BBCE5",loading:this.state.postLoading}))))}}]),t}(n.Component),O=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h3",null,"404 Error: Page not found"))}}]),t}(n.Component),j=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).doLogin=function(e){a.setState({postLoading:!0}),b.a.post("/login",{email:a.state.email,password:a.state.password}).then((function(e){a.setState({postLoading:!1}),a.props.history.push("/home")})).catch((function(e){a.setState({postLoading:!1})})),e.preventDefault()},a.handleChange=function(e){a.setState(Object(N.a)({},e.target.name,e.target.value))},a.state={loading:!1,email:"",password:"",error:!1,postLoading:!1},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.checkIfLoggedIn()}},{key:"checkIfLoggedIn",value:function(){var e=this;b.a.get("/users/test").then((function(t){e.props.history.push("/home")})).catch((function(e){}))}},{key:"render",value:function(){return this.state.error?l.a.createElement("div",{classNameName:"m-5"},l.a.createElement("h3",null,"There was an error")):this.state.loading?l.a.createElement("div",{classNameName:"d-flex justify-content-center m-5"},l.a.createElement(g.CircleSpinner,{size:60,color:"#686769",loading:this.state.loading})):l.a.createElement("div",{className:"mt-5 mb-5 container bg-light border"},l.a.createElement("div",{className:"row justify-content-md-center mt-5"},l.a.createElement("h1",null,"Log In to Know It's Off")),l.a.createElement("div",{className:"row justify-content-md-center mb-5"},l.a.createElement("form",null,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Email address"),l.a.createElement("input",{name:"email",type:"email",className:"form-control",value:this.state.email,onChange:this.handleChange,id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Enter email"}),l.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"We'll never share your email with anyone else.")),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Password"),l.a.createElement("input",{name:"password",type:"password",onChange:this.handleChange,value:this.state.password,className:"form-control",id:"exampleInputPassword1",placeholder:"Password"})),l.a.createElement("button",{onClick:this.doLogin,className:"btn btn-primary"},"Submit",l.a.createElement(g.CircleSpinner,{size:20,color:"#3BBCE5",loading:this.state.postLoading})),l.a.createElement(d.b,{id:"signupHelp",to:"/signup",className:"form-text text-muted"},"Don't have an account? Click here to sign up."))))}}]),t}(n.Component),w=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).doSignup=function(e){a.setState({postLoading:!0}),b.a.post("/users",{email:a.state.email,password:a.state.password}).then((function(e){a.setState({postLoading:!1}),a.props.history.push("/login")})),e.preventDefault()},a.handleChange=function(e){a.setState(Object(N.a)({},e.target.name,e.target.value))},a.state={loading:!1,email:"",password:"",error:!1,postLoading:!1},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.state.error?l.a.createElement("div",{classNameName:"m-5"},l.a.createElement("h3",null,"There was an error")):this.state.loading?l.a.createElement("div",{classNameName:"d-flex justify-content-center m-5"},l.a.createElement(g.CircleSpinner,{size:60,color:"#686769",loading:this.state.loading})):l.a.createElement("div",{className:"mt-5 mb-5 container bg-light border"},l.a.createElement("div",{className:"row justify-content-md-center mt-5"},l.a.createElement("h1",null,"Sign up to Know It's Off")),l.a.createElement("div",{className:"row justify-content-md-center mb-5"},l.a.createElement("form",null,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Email address"),l.a.createElement("input",{name:"email",type:"email",className:"form-control",value:this.state.email,onChange:this.handleChange,id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Enter email"}),l.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"We'll never share your email with anyone else.")),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Password"),l.a.createElement("input",{name:"password",type:"password",onChange:this.handleChange,value:this.state.password,className:"form-control",id:"exampleInputPassword1",placeholder:"Password"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Confirm Password"),l.a.createElement("input",{name:"passwordConf",type:"password",onChange:this.handleChange,value:this.state.passwordConf,className:"form-control",id:"exampleInputPassword2",placeholder:"Password"})),l.a.createElement("button",{onClick:this.doSignup,className:"btn btn-primary"},"Submit",l.a.createElement(g.CircleSpinner,{size:20,color:"#3BBCE5",loading:this.state.postLoading})))))}}]),t}(n.Component),A=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={error:!1,redirect:"/login"},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.state.error?l.a.createElement("div",{classNameName:"m-5"},l.a.createElement("h3",null,"There was an error")):(b.a.get("/logout"),l.a.createElement(u.a,{to:this.state.redirect}))}}]),t}(n.Component),_=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).patchData=function(e){a.setState({postLoading:!0}),b.a.patch("/appliances/".concat(a.state.myAppliance.id),a.state.myAppliance).then((function(e){a.setState({postLoading:!1}),alert("Changes saved.")})).catch((function(e){a.setState({postLoading:!1,error:!0}),console.log(e.response)})),e.preventDefault()},a.handleChange=function(e){a.setState({myAppliance:Object(S.a)({},a.state.myAppliance,Object(N.a)({},e.target.name,e.target.value))})},a.handleChangeInt=function(e){a.setState({myAppliance:Object(S.a)({},a.state.myAppliance,Object(N.a)({},e.target.name,parseInt(e.target.value)))})},a.handleChangeCheck=function(e){a.setState({myAppliance:Object(S.a)({},a.state.myAppliance,Object(N.a)({},e.target.name,e.target.checked))})},a.deleteAppliance=function(e){a.setState({deleteLoading:!0}),window.confirm("Do you really want to delete this, it will be permanent!")&&b.a.delete("/appliances/"+a.state.myAppliance.id).then((function(e){a.setState({deleteLoading:!1,redirect:"/appliances"})})).catch((function(e){a.setState({deleteLoading:!1,error:!0})}))},a.state={loading:!0,myAppliance:{},error:!1,redirect:null,postLoading:!1,deleteLoading:!1},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.handle;b.a.get("/appliances/".concat(t)).then((function(t){e.setState({loading:!1,myAppliance:t.data})})).catch((function(t){e.setState({loading:!1,error:!0}),"not authorized"===t.response.data&&e.setState({redirect:"/"}),console.log(t.response.data)}))}},{key:"render",value:function(){return this.state.error?this.state.redirect?l.a.createElement(u.a,{to:this.state.redirect}):l.a.createElement("div",{className:"m-5"},l.a.createElement("h3",null,"There was an error")):this.state.loading?l.a.createElement("div",{className:"d-flex justify-content-center m-5"},l.a.createElement(g.CircleSpinner,{size:60,color:"#686769",loading:this.state.loading})):l.a.createElement("div",{className:"m-5"},l.a.createElement("form",null,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Appliance name"),l.a.createElement("input",{className:"form-control",name:"name",id:"inputName","aria-describedby":"nameHelp",onChange:this.handleChange,value:this.state.myAppliance.name})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Appliance type"),l.a.createElement("input",{className:"form-control",name:"type",id:"inputType",onChange:this.handleChange,value:this.state.myAppliance.type})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Alert Message"),l.a.createElement("input",{className:"form-control",name:"alert_message",id:"inputAlertMessage",onChange:this.handleChange,value:this.state.myAppliance.alert_message})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Alert Time"),l.a.createElement("input",{className:"form-control",name:"alert_time",id:"inputAlertTime",onChange:this.handleChangeInt,value:this.state.myAppliance.alert_time})),l.a.createElement("div",{className:"form-check"},l.a.createElement("input",{type:"checkbox",className:"form-check-input",name:"alert_email",onChange:this.handleChangeCheck,checked:this.state.myAppliance.alert_email,id:"exampleCheck1"}),l.a.createElement("label",{className:"form-check-label"},"Send email alerts")),l.a.createElement("div",{className:"form-check"},l.a.createElement("input",{type:"checkbox",className:"form-check-input",id:"exampleCheck2",name:"alert_text",onChange:this.handleChangeCheck,checked:this.state.myAppliance.alert_text}),l.a.createElement("label",{className:"form-check-label"},"Send text alerts")),l.a.createElement("button",{onClick:this.patchData,className:"btn btn-primary"},"Save changes ",l.a.createElement(g.CircleSpinner,{size:20,color:"#3BBCE5",loading:this.state.postLoading})),l.a.createElement("button",{onClick:this.deleteAppliance,className:"btn btn-danger"},"Delete Appliance",l.a.createElement(g.CircleSpinner,{size:20,color:"#3BBCE5",loading:this.state.deleteLoading}))))}}]),t}(n.Component),k=a(40),x=a(95),L=a(94),I=Object(n.memo)((function(e){var t=e.id,a=e.onMoveItem,s=e.children,r=Object(n.useRef)(null),c=Object(x.a)({item:{id:t,type:"IMG"},collect:function(e){return{isDragging:e.isDragging()}}}),i=Object(k.a)(c,2),o=i[0].isDragging,m=i[1],p=Object(L.a)({accept:"IMG",hover:function(e){e.id!==t&&a(e.id,t)}}),u=Object(k.a)(p,2)[1];m(r),u(r);var d={opacity:o?.5:1};return l.a.Children.map(s,(function(e){return l.a.cloneElement(e,{forwardedRef:r,style:d})}))})),P=a(59),D=a(39),z=a(28);function M(){var e=Object(D.a)(['\n  flex: 0 0 25%;\n  flex-grow: 0.75;\n  min-width: 250px;\n  max-width: 500px;\n  max-height: 270px;\n  display: flex;\n  justify-content: center;\n  align-items: stretch;\n  box-sizing: border-box;\n  :before {\n    content: "";\n    display: table;\n    padding-top: 100%;\n  }\n']);return M=function(){return e},e}function T(){var e=Object(D.a)(["\n  width: 100%;\n  //padding: 0px 10px 0px 10px;\n  display: flex;\n  justify-content: start;\n  flex-wrap: wrap;\n"]);return T=function(){return e},e}var B=z.default.div(T()),H=z.default.div(M()),U=function(e){var t=e.forwardedRef,a=Object(P.a)(e,["forwardedRef"]);return l.a.createElement(H,Object.assign({ref:t},a))},R=a(33),F=a.n(R);function W(e,t,a){return function(e,t,a){return a>=e.length&&(a=e.length-1),e.splice(a,0,e.splice(t,1)[0]),e}(e,t,t+a)}function G(e,t,a){return t.findIndex((function(t){return t.id===a[e].id}))}var J=Object(n.createContext)({items:[]}),K=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).setItems=function(e){if(F.a.get("items")){var t,n=e.slice(),l=JSON.parse(F.a.get("items")),s=[];for(t in l){var r=G(t,n,l);-1!==r&&(s.push(l[t]),n.splice(r,1))}for(t in n)s.push(n[t]);a.setState({items:s})}else a.setState({items:e})},a.moveItem=function(e,t){var n=a.state.items.findIndex((function(t){return t.id===e})),l=a.state.items.findIndex((function(e){return e.id===t}));if(-1!==e&&-1!==t){var s=l-n;a.setState((function(e){return{items:W(e.items,n,s)}})),F.a.set("items",a.state.items)}},a.state={items:[],moveItem:a.moveItem,setItems:a.setItems},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement(J.Provider,{value:this.state},this.props.children)}}]),t}(n.Component),q=J,V=a(19),Y=a(30),$=(a(89),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).state={scout_id:a.props.scout_id,scout_name:a.props.scout_name,scout_battery:a.props.scout_battery,appliance_name:a.props.appliance_name,appliance_type:a.props.appliance_type,appliance_status:a.props.appliance_status,status:"OFF",background:"light",loading:!0},a.deleteScout=function(e){!0===window.confirm("Do you really want to delete this, it will be permanent!")&&b.a.delete("/scouts/"+a.state.scout_id).then((function(e){a.setState({redirect:"/"})})).catch((function(e){a.setState({error:!0})}))},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.appliance_status?this.setState({background:"success",status:"ON"}):this.props.appliance_status||this.setState({background:"danger"}),this.setState({loading:!1})}},{key:"render",value:function(){return this.state.loading?l.a.createElement("div",{className:"d-flex justify-content-center m-5"},l.a.createElement(g.CircleSpinner,{size:60,color:"#686769",loading:this.state.loading})):l.a.createElement(V.a,{bg:this.state.background,className:"tile text-center col"},l.a.createElement(V.a.Header,null,l.a.createElement(Y.a,{value:this.state.scout_battery,maxValue:1,text:"".concat(this.state.scout_battery,"%"),styles:Object(Y.b)({textSize:"2.2rem",textColor:"#000"})}),l.a.createElement(V.a.Title,{className:"card-title-scout"},this.state.scout_name)),l.a.createElement(V.a.Body,null,l.a.createElement(V.a.Title,{className:"card-title-appliance"},this.state.appliance_name,"(",this.state.appliance_type,")"),l.a.createElement(V.a.Text,{className:"card-text-status"},this.state.status),l.a.createElement(d.b,{className:"card-button btn btn-primary text-wrap",to:"/scout/"+this.state.scout_id},"Edit Scout")))}}]),t}(n.Component));var Q=function(e){var t=Object(n.useContext)(q),a=t.items,s=t.moveItem;return l.a.createElement("div",{className:"GridApp"},l.a.createElement(B,null,a.map((function(e){return l.a.createElement(I,{key:e.id,id:e.id,onMoveItem:s},l.a.createElement(U,null,l.a.createElement($,{key:e.id,scout_id:e.id,scout_name:e.name,scout_battery:e.battery_power,appliance_name:e.appliance_name,appliance_type:e.appliance_type,appliance_status:e.appliance_status})))}))))},X=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).countAppliancesOn=function(e){for(var t=0,a=0;e.length>a;a++)!0===e[a].status&&t++;return t},a.state={myAppliances:[],myScouts:[],loading:!0,error:!1,redirect:null},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.a.get("/appliances").then((function(t){e.setState({myAppliances:t.data,appliancesOn:e.countAppliancesOn(t.data)}),b.a.get("/scouts").then((function(a){e.setState({myScouts:a.data}),e.addAppliancetoScout(a.data,t.data),e.context.setItems(a.data),e.setState({loading:!1})})).catch((function(t){e.setState({loading:!1,error:!0}),console.log("error at get scouts: ",t.response)}))})).catch((function(t){e.setState({loading:!1,error:!0}),"not authorized"===t.response.data&&e.setState({redirect:"/login"}),console.log("error at get appliances: ",t.response)}))}},{key:"addAppliancetoScout",value:function(e,t){var a,n;for(a in e)for(n in t)if(t[n].id===e[a].appliance_id){var l=t[n],s=e.slice();s[a].appliance_name=l.name,s[a].appliance_type=l.type,s[a].appliance_status=l.status,this.setState({myScouts:s})}}},{key:"render",value:function(){return this.state.loading?l.a.createElement("div",{className:"d-flex justify-content-center m-5"},l.a.createElement(g.CircleSpinner,{size:60,color:"#686769",loading:this.state.loading})):this.state.error?(console.log(this.state),this.state.redirect?l.a.createElement(u.a,{to:this.state.redirect}):l.a.createElement("div",null,l.a.createElement("h3",null,"There was an error"),l.a.createElement("h3",null,this.state.error_response))):l.a.createElement("div",null,l.a.createElement("div",{className:"row m-3"},l.a.createElement("div",{className:"col"},l.a.createElement("h1",{className:"text-center"},"Home"))),l.a.createElement("div",{className:"row m-3"},l.a.createElement("div",{className:"col"},l.a.createElement("h6",{className:"text-muted text-center"},this.state.appliancesOn," of your appliances are on."))),l.a.createElement(Q,null))}}]),t}(n.Component);X.contextType=q;var Z=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).postData=function(e){a.setState({postLoading:!0}),0===a.state.myScout.appliance_id?b.a.post("/appliances",a.state.myAppliance).then((function(e){console.log(e),a.setState({myScout:Object(S.a)({},a.state.myScout,{appliance_id:e.data.id})}),a.postScout()})).catch((function(e){a.setState({postLoading:!1,error:!0})})):a.postScout(),e.preventDefault()},a.handleChange=function(e){a.setState({myAppliance:Object(S.a)({},a.state.myAppliance,Object(N.a)({},e.target.name,e.target.value))})},a.handleChangeScout=function(e){a.setState({myScout:Object(S.a)({},a.state.myScout,Object(N.a)({},e.target.name,e.target.value))})},a.handleChangeSelect=function(e){"New Appliance"===e.target.value?a.setState({disabled:!1,myScout:Object(S.a)({},a.state.myScout,{appliance_id:0})}):a.setState({disabled:!0,myScout:Object(S.a)({},a.state.myScout,{appliance_id:parseInt(e.target.value)})})},a.handleChangeCheck=function(e){"false"===e.target.value?a.setState({myAppliance:Object(S.a)({},a.state.myAppliance,Object(N.a)({},e.target.name,!0))}):a.setState({myAppliance:Object(S.a)({},a.state.myAppliance,Object(N.a)({},e.target.name,!1))})},a.state={myAppliance:{name:"My Appliance",type:"Oven",alert_message:"Appliance is left on",alert_time:420,alert_email:!1,alert_text:!1},myScout:{name:"My Scout",appliance_id:0},usersAppliances:[],applianceNames:[],disabled:!1,loading:!0,error:!1,postLoading:!1,redirect:null},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.a.get("/appliances").then((function(t){e.setState({loading:!1,usersAppliances:t.data});var a,n=[];for(a in e.state.usersAppliances)n.push([e.state.usersAppliances[a].name,e.state.usersAppliances[a].id]);e.setState({applianceNames:n})})).catch((function(t){e.setState({loading:!1,error:!0}),t.response&&(e.setState({error_response:t.response.data}),"not authorized"===t.response.data?e.setState({redirect:"/"}):t.response.data&&console.log(t.response.data))}))}},{key:"postScout",value:function(){var e=this;console.log(this.state),b.a.post("/scouts",this.state.myScout).then((function(t){e.setState({postLoading:!1}),alert("Appliance added.")})).catch((function(t){e.setState({postLoading:!1,error:!0})}))}},{key:"render",value:function(){if(this.state.error)return l.a.createElement("div",{className:"m-5"},l.a.createElement("h3",null,"There was an error"));if(this.state.loading)return l.a.createElement("div",{className:"d-flex justify-content-center m-5"},l.a.createElement(g.CircleSpinner,{size:60,color:"#686769",loading:this.state.loading}));var e=this.state.applianceNames.map((function(e){return l.a.createElement("option",{key:e[1],value:e[1]},e[0])}));return l.a.createElement("div",{className:"m-5"},l.a.createElement("h3",null,"New Scout"),l.a.createElement("form",null,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Scout name"),l.a.createElement("input",{className:"form-control",name:"name",id:"inputScoutName","aria-describedby":"nameHelp",onChange:this.handleChangeScout,value:this.state.myScout.name})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Choose Existing Appliance"),l.a.createElement("select",{className:"form-control",id:"inputApplianceId",onChange:this.handleChangeSelect},l.a.createElement("option",null,"New Appliance"),e)),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Appliance name"),l.a.createElement("input",{className:"form-control",name:"name",id:"inputApplianceName",disabled:this.state.disabled,onChange:this.handleChange,value:this.state.myAppliance.name})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Appliance type"),l.a.createElement("input",{className:"form-control",name:"type",id:"inputApplianceType",disabled:this.state.disabled,onChange:this.handleChange,value:this.state.myAppliance.type})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Alert Message"),l.a.createElement("input",{className:"form-control",name:"alert_message",id:"inputAlertMessage",disabled:this.state.disabled,onChange:this.handleChange,value:this.state.myAppliance.alert_message})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Alert Time"),l.a.createElement("input",{className:"form-control",name:"alert_time",id:"inputAlertTime",disabled:this.state.disabled,onChange:this.handleChange,value:this.state.myAppliance.alert_time})),l.a.createElement("div",{className:"form-check"},l.a.createElement("input",{type:"checkbox",className:"form-check-input",name:"alert_email",disabled:this.state.disabled,onChange:this.handleChangeCheck,value:this.state.myAppliance.alert_email,id:"inputAlertEmail"}),l.a.createElement("label",{className:"form-check-label"},"Send email alerts")),l.a.createElement("div",{className:"form-check"},l.a.createElement("input",{type:"checkbox",className:"form-check-input",id:"inputAlertText",name:"alert_text",disabled:this.state.disabled,onChange:this.handleChangeCheck,value:this.state.myAppliance.alert_text}),l.a.createElement("label",{className:"form-check-label"},"Send text alerts")),l.a.createElement("button",{onClick:this.postData,className:"btn btn-success"},"Add this scout",l.a.createElement(g.CircleSpinner,{size:20,color:"#3BBCE5",loading:this.state.postLoading}))))}}]),t}(n.Component),ee=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).updateAppliance=function(e){a.setState({patchLoading:!0}),0===a.state.myScout.appliance_id?b.a.post("/appliances",a.state.myAppliance).then((function(e){a.setState({myScout:Object(S.a)({},a.state.myScout,{appliance_id:e.id})}),a.updateScout()})).catch((function(e){a.setState({patchLoading:!1,error:!0}),e.response.data&&console.log(e.response)})):b.a.patch("/appliances/"+parseInt(a.state.myAppliance.id),a.state.myAppliance).then((function(e){a.updateScout()})).catch((function(e){a.setState({patchLoading:!1,error:!0}),e.response.data&&console.log(e.response)})),e.preventDefault()},a.deleteScout=function(e){!0===window.confirm("Do you really want to delete this, it will be permanent!")&&b.a.delete("/scouts/"+a.state.scout_id).then((function(e){a.setState({redirect:"/"})})).catch((function(e){a.setState({error:!0}),e.response&&a.setState({error_response:e.response.data})}))},a.handleChange=function(e){a.setState({myAppliance:Object(S.a)({},a.state.myAppliance,Object(N.a)({},e.target.name,e.target.value))}),a.state.doingNewAppliance&&a.setState({newAppliance:Object(S.a)({},a.state.myAppliance)})},a.handleChangeScout=function(e){a.setState({myScout:Object(S.a)({},a.state.myScout,Object(N.a)({},e.target.name,e.target.value))})},a.handleChangeSelect=function(e){"0"===e.target.value?a.setState({myAppliance:Object(S.a)({},a.state.newAppliance,{id:0}),myScout:Object(S.a)({},a.state.myScout,{appliance_id:0}),doingNewAppliance:!0}):a.setState({myAppliance:Object(S.a)({},a.state.usersAppliances[parseInt(e.target.value)-1]),myScout:Object(S.a)({},a.state.myScout,{appliance_id:a.state.usersAppliances[parseInt(e.target.value)-1].id}),doingNewAppliance:!1})},a.handleChangeCheck=function(e){a.setState({myAppliance:Object(S.a)({},a.state.myAppliance,Object(N.a)({},e.target.name,e.target.checked))})},a.state={myAppliance:{},myScout:{},scout_id:null,newAppliance:{name:"My Appliance",type:"Oven",alert_message:"Appliance is left on",alert_time:420,alert_text:!1,alert_email:!1},usersAppliances:[],applianceNames:[],doingNewAppliance:!1,disabled:!0,loading:!0,error:!1,patchLoading:!1,deleteLoading:!1,redirect:null},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.handle;this.setState({scout_id:t}),b.a.get("/appliances").then((function(t){e.setState({usersAppliances:t.data});var a,n=[];for(a in e.state.usersAppliances)n.push([e.state.usersAppliances[a].name,e.state.usersAppliances[a].id,parseInt(a)+1]);e.setState({applianceNames:n})})).catch((function(t){e.setState({loading:!1,error:!0}),t.response&&(e.setState({error_response:t.response.data}),"not authorized"===t.response.data?e.setState({redirect:"/"}):t.response.data&&console.log(t.response))})),b.a.get("/scouts/".concat(t)).then((function(t){e.setState({myScout:{name:t.data.name,appliance_id:t.data.appliance_id}}),b.a.get("/appliances/"+t.data.appliance_id).then((function(t){e.setState({myAppliance:t.data,loading:!1})})).catch((function(t){e.setState({loading:!1,myAppliance:Object(S.a)({},e.state.newAppliance,{id:0})})}))})).catch((function(t){e.setState({loading:!1,error:!0}),t.response&&(e.setState({error_response:t.response.data}),"not authorized"===t.response.data?e.setState({redirect:"/"}):t.response.data&&console.log(t.response))}))}},{key:"updateScout",value:function(){var e=this;b.a.patch("/scouts/"+this.state.scout_id,this.state.myScout).then((function(t){e.setState({patchLoading:!1}),alert("Appliance updated.")})).catch((function(t){e.setState({patchLoading:!1,error:!0}),t.response.data&&console.log(t.response)}))}},{key:"render",value:function(){if(this.state.redirect)return l.a.createElement(u.a,{to:this.state.redirect});if(this.state.error)return l.a.createElement("div",{className:"m-5"},l.a.createElement("h3",null,"There was an error"));if(this.state.loading)return l.a.createElement("div",{className:"d-flex justify-content-center m-5"},l.a.createElement(g.CircleSpinner,{size:60,color:"#686769",loading:this.state.loading}));var e=this.state.applianceNames.map((function(e){return l.a.createElement("option",{key:e[2],value:e[2]},e[0])}));return l.a.createElement("div",{className:"m-5"},l.a.createElement("h3",null,"Edit Scout"),l.a.createElement("form",null,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Scout name"),l.a.createElement("input",{className:"form-control",name:"name",id:"inputScoutName","aria-describedby":"nameHelp",onChange:this.handleChangeScout,value:this.state.myScout.name})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Choose Existing Appliance"),l.a.createElement("select",{className:"form-control",id:"inputApplianceId",onChange:this.handleChangeSelect,defaultValue:this.state.myAppliance.id},l.a.createElement("option",{key:"0",value:"0"},"New Appliance"),e)),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Appliance name"),l.a.createElement("input",{className:"form-control",name:"name",id:"inputApplianceName",onChange:this.handleChange,value:this.state.myAppliance.name})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Appliance type"),l.a.createElement("input",{className:"form-control",name:"type",id:"inputApplianceType",onChange:this.handleChange,value:this.state.myAppliance.type})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Alert Message"),l.a.createElement("input",{className:"form-control",name:"alert_message",id:"inputAlertMessage",onChange:this.handleChange,value:this.state.myAppliance.alert_message})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Alert Time"),l.a.createElement("input",{className:"form-control",name:"alert_time",id:"inputAlertTime",onChange:this.handleChange,value:this.state.myAppliance.alert_time})),l.a.createElement("div",{className:"form-check"},l.a.createElement("input",{type:"checkbox",className:"form-check-input",name:"alert_email",onChange:this.handleChangeCheck,checked:this.state.myAppliance.alert_email,id:"inputAlertEmail"}),l.a.createElement("label",{className:"form-check-label"},"Send email alerts")),l.a.createElement("div",{className:"form-check"},l.a.createElement("input",{type:"checkbox",className:"form-check-input",id:"inputAlertText",name:"alert_text",onChange:this.handleChangeCheck,checked:this.state.myAppliance.alert_text}),l.a.createElement("label",{className:"form-check-label"},"Send text alerts")),l.a.createElement("button",{onClick:this.updateAppliance,className:"btn btn-success"},"Update this scout",l.a.createElement(g.CircleSpinner,{size:20,color:"#3BBCE5",loading:this.state.patchLoading})),l.a.createElement("button",{onClick:this.deleteScout,className:"btn btn-danger"},"Delete this scout",l.a.createElement(g.CircleSpinner,{size:20,color:"#3BBCE5",loading:this.state.deleteLoading}))))}}]),t}(n.Component),te=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).updateUser=function(e){a.setState({patchLoading:!0}),a.state.current_user.password===a.state.confNewPassword?(b.a.post("/login",{email:a.state.current_user.email,password:a.state.myPassword}).then((function(e){b.a.patch("/users/current",a.state.current_user).then((function(e){a.setState({patchLoading:!1}),alert("User updated.")})).catch((function(e){a.setState({patchLoading:!1,error_response:e.response.status}),"not authorized"===e.response.data?a.setState({redirect:"/"}):e.response.data&&console.log(e.response.data)}))})).catch((function(e){a.setState({patchLoading:!1}),alert("Please enter a valid password")})),e.preventDefault()):alert("Passwords dont match!")},a.deleteUser=function(e){a.setState({deleteLoading:!0}),!0===window.confirm("Do you really want to delete this, it will be permanent!")?b.a.delete("/users/current").then((function(e){alert("Your account had been deleted"),a.setState({deleteLoading:!1,redirect:"/"})})).catch((function(e){a.setState({deleteLoading:!1,error_response:e.response.data}),"not authorized"===e.response.data?a.setState({redirect:"/"}):e.response.data&&console.log(e.response.data)})):a.setState({deleteLoading:!1})},a.handleChange=function(e){a.setState({current_user:Object(S.a)({},a.state.current_user,Object(N.a)({},e.target.name,e.target.value))})},a.handlePassChange=function(e){a.setState(Object(N.a)({},e.target.name,e.target.value))},a.handlePhoneChange=function(e){a.setState({current_user:Object(S.a)({},a.state.current_user,Object(N.a)({},e.target.name,parseInt(e.target.value)))})},a.state={current_user:{first_name:"",last_name:"",email:"",phone_number:"",password:""},myPassword:"",confNewPassword:"",loading:!0,error:!1,patchLoading:!1,deleteLoading:!1,redirect:null},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.a.get("/users/current").then((function(t){e.setState({loading:!1,current_user:{first_name:t.data.first_name,last_name:t.data.last_name,email:t.data.email,phone_number:t.data.phone_number}})})).catch((function(t){e.setState({loading:!1,error:!0}),t.response&&(e.setState({error_response:t.response.status}),"not authorized"===t.response.data?e.setState({redirect:"/"}):t.response.data&&console.log(t.response.data))}))}},{key:"render",value:function(){return this.state.error?l.a.createElement("div",{className:"m-5"},l.a.createElement("h3",null,"There was an error")):this.state.loading?l.a.createElement("div",{className:"d-flex justify-content-center m-5"},l.a.createElement(g.CircleSpinner,{size:60,color:"#686769",loading:this.state.loading})):l.a.createElement("div",{className:"m-5"},l.a.createElement("h3",null,"Edit User - Some fields are optional."),l.a.createElement("form",null,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"First Name"),l.a.createElement("input",{className:"form-control",name:"first_name",id:"inputFirstName","aria-describedby":"nameHelp",onChange:this.handleChange,value:this.state.current_user.first_name,placeholder:"first name"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Last Name"),l.a.createElement("input",{className:"form-control",name:"last_name",id:"inputLastName",onChange:this.handleChange,value:this.state.current_user.last_name,placeholder:"last name"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Email - Required"),l.a.createElement("input",{className:"form-control",name:"email",id:"inputEmail",type:"email",onChange:this.handleChange,value:this.state.current_user.email,placeholder:"email"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Phone Number"),l.a.createElement("input",{className:"form-control",name:"phone_number",id:"inputPhoneNumber",onChange:this.handlePhoneChange,value:this.state.current_user.phone_number,placeholder:"5555555555"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"New Password"),l.a.createElement("input",{className:"form-control",name:"password",id:"inputNewPassword",type:"password",onChange:this.handleChange,value:this.state.current_user.password,placeholder:"new password"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Confirm New Password"),l.a.createElement("input",{className:"form-control",name:"confNewPassword",id:"inputConfNewPassword",type:"password",onChange:this.handlePassChange,value:this.state.confNewPassword,placeholder:"new password"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Current Password - Required"),l.a.createElement("input",{className:"form-control",name:"myPassword",id:"inputCurrentPassword",type:"password",onChange:this.handlePassChange,value:this.state.myPassword,placeholder:"current password"})),l.a.createElement("button",{onClick:this.updateUser,className:"btn btn-success"},"Update User Settings",l.a.createElement(g.CircleSpinner,{size:20,color:"#3BBCE5",loading:this.state.patchLoading})),l.a.createElement("button",{onClick:this.deleteUser,className:"btn btn-danger"},"Delete User Permantenly",l.a.createElement(g.CircleSpinner,{size:20,color:"#3BBCE5",loading:this.state.deleteLoading}))))}}]),t}(n.Component);a(90);b.a.defaults.baseURL="https://know.pineapplepop.me/api";var ae=function(e){var t=e.exact,a=e.path,n=e.component;return l.a.createElement(u.b,{exact:t,path:a,render:function(e){return l.a.createElement("div",null,l.a.createElement(y,null),l.a.createElement(n,e))}})},ne=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.a,null,l.a.createElement(u.d,null,l.a.createElement(u.b,{exact:!0,path:"/",component:j}),l.a.createElement(u.b,{exact:!0,path:"/login",component:j}),l.a.createElement(u.b,{exact:!0,path:"/logout",component:A}),l.a.createElement(u.b,{exact:!0,path:"/signup",component:w}),l.a.createElement(ae,{exact:!0,path:"/home",component:X}),l.a.createElement(ae,{exact:!0,path:"/scout/new",component:Z}),l.a.createElement(ae,{exact:!0,path:"/scout/:handle",component:ee}),l.a.createElement(ae,{exact:!0,path:"/user/edit",component:te}),l.a.createElement(ae,{exact:!0,path:"/appliances",component:E}),l.a.createElement(ae,{exact:!0,path:"/appliances/new",component:C}),l.a.createElement(ae,{exact:!0,path:"/appliances/:handle",component:_}),l.a.createElement(ae,{component:O}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var le=a(93),se=a(58);r.a.render(l.a.createElement(le.a,{backend:se.a,options:{enableMouseEvents:!0}},l.a.createElement(K,null,l.a.createElement(ne,null))),document.getElementById("app")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[62,1,2]]]);
//# sourceMappingURL=main.91f5e8a2.chunk.js.map